import{a as k,u as w,r as g,b as I,c as s,F as x,j as e,d as C}from"./app.5809d7a7.js";import{c as D}from"./index.0579b088.js";import{A as R}from"./ActionMessage.6e578789.js";import{F as T}from"./FormSection.820f9092.js";import{I as l,T as m}from"./TextInput.502150cd.js";import{I as n}from"./InputLabel.69bc5a36.js";import{P as j}from"./PrimaryButton.0f55ee33.js";import{S as N}from"./SecondaryButton.d40411a6.js";import"./transition.be6244da.js";import"./SectionTitle.df98a8cb.js";function H({user:o}){const a=k({_method:"PUT",first_name:o.first_name,last_name:o.last_name,username:o.username,phone:o.phone,email:o.email,photo:null}),c=w(),[i,u]=g.exports.useState(null),r=g.exports.useRef(null),P=I();function _(){a.post(c("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>p()})}function b(){var t;(t=r.current)==null||t.click()}function y(){var f,h;const t=(h=(f=r.current)==null?void 0:f.files)==null?void 0:h[0];if(!t)return;a.setData("photo",t);const d=new FileReader;d.onload=F=>{var v;u((v=F.target)==null?void 0:v.result)},d.readAsDataURL(t)}function S(){C.Inertia.delete(c("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{u(null),p()}})}function p(){var t;(t=r.current)!=null&&t.value&&(r.current.value="",a.setData("photo",null))}return s(T,{onSubmit:_,title:"Profile Information",description:"Update your account's profile information and email address.",renderActions:()=>s(x,{children:[e(R,{on:a.recentlySuccessful,className:"mr-3",children:"Saved."}),e(j,{className:D({"opacity-25":a.processing}),disabled:a.processing,children:"Save"})]}),children:[P.props.jetstream.managesProfilePhotos?s("div",{className:"col-span-6 sm:col-span-4",children:[e("input",{type:"file",className:"hidden",ref:r,onChange:y}),e(n,{htmlFor:"photo",value:"Photo"}),i?e("div",{className:"mt-2",children:e("span",{className:"block rounded-full w-20 h-20",style:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:`url('${i}')`}})}):e("div",{className:"mt-2",children:e("img",{src:o.profile_photo_url,alt:o.username,className:"rounded-full h-20 w-20 object-cover"})}),e(N,{className:"mt-2 mr-2",type:"button",onClick:b,children:"Select A New Photo"}),o.profile_photo_path?e(N,{type:"button",className:"mt-2",onClick:S,children:"Remove Photo"}):null,e(l,{message:a.errors.photo,className:"mt-2"})]}):null,s("div",{className:"col-span-6 sm:col-span-4",children:[e(n,{htmlFor:"first_name",value:"Nom"}),e(m,{id:"first_name",type:"text",className:"mt-1 block w-full",value:a.data.first_name,onChange:t=>a.setData("first_name",t.currentTarget.value),autoComplete:"first_name"}),e(l,{message:a.errors.first_name,className:"mt-2"})]}),s("div",{className:"col-span-6 sm:col-span-4",children:[e(n,{htmlFor:"last_name",value:"Pr\xE9nom"}),e(m,{id:"last_name",type:"text",className:"mt-1 block w-full",value:a.data.last_name,onChange:t=>a.setData("last_name",t.currentTarget.value),autoComplete:"last_name"}),e(l,{message:a.errors.last_name,className:"mt-2"})]}),s("div",{className:"col-span-6 sm:col-span-4",children:[e(n,{htmlFor:"username",value:"Nom d'utilisateur"}),e(m,{id:"username",type:"text",className:"mt-1 block w-full",value:a.data.username,onChange:t=>a.setData("username",t.currentTarget.value),autoComplete:"username"}),e(l,{message:a.errors.username,className:"mt-2"})]}),s("div",{className:"col-span-6 sm:col-span-4",children:[e(n,{htmlFor:"email",value:"Email"}),e(m,{id:"email",type:"email",className:"mt-1 block w-full",value:a.data.email,onChange:t=>a.setData("email",t.currentTarget.value)}),e(l,{message:a.errors.email,className:"mt-2"})]})]})}export{H as default};
