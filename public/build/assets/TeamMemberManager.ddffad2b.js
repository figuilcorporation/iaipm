import{u as G,a as h,r as f,c as n,j as e,F as H,d as J}from"./app.ae1c3879.js";import{u as K}from"./useTypedPage.dc4de3ad.js";import{A as Q}from"./ActionMessage.16bf7af4.js";import{A as S}from"./Modal.04af281a.js";import{C as m}from"./ConfirmationModal.9edfe935.js";import{D as w}from"./DangerButton.2ada149e.js";import{D as N}from"./DialogModal.85fa689f.js";import{F as U}from"./FormSection.294a9d49.js";import{T as V,I as F}from"./TextInput.d387747c.js";import{I as A}from"./InputLabel.93ff7e42.js";import{P as R}from"./PrimaryButton.010b5f55.js";import{S as k}from"./SecondaryButton.2c0b96a0.js";import{S as T}from"./SectionBorder.122d0149.js";import{c as a}from"./index.0579b088.js";import"./transition.71154e30.js";import"./SectionTitle.2e67c65e.js";function ue({team:o,availableRoles:s,userPermissions:c}){const d=G(),r=h({email:"",role:null}),l=h({role:null}),v=h({}),g=h({}),[L,u]=f.exports.useState(!1),[b,j]=f.exports.useState(null),[B,y]=f.exports.useState(!1),[x,p]=f.exports.useState(null),C=K();function D(){r.post(d("team-members.store",[o]),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>r.reset()})}function I(t){J.Inertia.delete(d("team-invitations.destroy",[t]),{preserveScroll:!0})}function z(t){j(t),l.setData("role",t.membership.role),u(!0)}function O(){!b||l.put(d("team-members.update",[o,b]),{preserveScroll:!0,onSuccess:()=>u(!1)})}function _(){y(!0)}function E(){v.delete(d("team-members.destroy",[o,C.props.user]))}function W(t){p(t)}function P(){!x||g.delete(d("team-members.destroy",[o,x]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>p(null)})}function M(t){var i;return(i=s.find(q=>q.key===t))==null?void 0:i.name}return n("div",{children:[c.canAddTeamMembers?n("div",{children:[e(T,{}),n(U,{onSubmit:D,title:"Add Team Member",description:"Add a new team member to your team, allowing them to collaborate with you.",renderActions:()=>n(H,{children:[e(Q,{on:r.recentlySuccessful,className:"mr-3",children:"Added."}),e(R,{className:a({"opacity-25":r.processing}),disabled:r.processing,children:"Add"})]}),children:[e("div",{className:"col-span-6",children:e("div",{className:"max-w-xl text-sm text-slate-600",children:"Please provide the email address of the person you would like to add to this team."})}),n("div",{className:"col-span-6 sm:col-span-6",children:[e(A,{htmlFor:"email",value:"Email"}),e(V,{id:"email",type:"email",className:"mt-1 block w-full",value:r.data.email,onChange:t=>r.setData("email",t.currentTarget.value)}),e(F,{message:r.errors.email,className:"mt-2"})]}),s.length>0?n("div",{className:"col-span-6 lg:col-span-4",children:[e(A,{htmlFor:"roles",value:"Role"}),e(F,{message:r.errors.role,className:"mt-2"}),e("div",{className:"relative z-0 mt-1 border border-slate-200 rounded-lg cursor-pointer",children:s.map((t,i)=>e("button",{type:"button",className:a("relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-slate-300 focus:ring focus:ring-slate-200",{"border-t border-slate-200 rounded-t-none":i>0,"rounded-b-none":i!=Object.keys(s).length-1}),onClick:()=>r.setData("role",t.key),children:n("div",{className:a({"opacity-50":r.data.role&&r.data.role!=t.key}),children:[n("div",{className:"flex items-center",children:[e("div",{className:a("text-sm text-slate-600",{"font-semibold":r.data.role==t.key}),children:t.name}),r.data.role==t.key?e("svg",{className:"ml-2 h-5 w-5 text-green-400",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):null]}),e("div",{className:"mt-2 text-xs text-slate-600",children:t.description})]})},t.key))})]}):null]})]}):null,o.team_invitations.length>0&&c.canAddTeamMembers?n("div",{children:[e(T,{}),e("div",{className:"mt-10 sm:mt-0"}),e(S,{title:"Pending Team Invitations",description:"These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation.",children:e("div",{className:"space-y-6",children:o.team_invitations.map(t=>n("div",{className:"flex items-center justify-between",children:[e("div",{className:"text-slate-600",children:t.email}),e("div",{className:"flex items-center",children:c.canRemoveTeamMembers?e("button",{className:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:()=>I(t),children:"Cancel"}):null})]},t.id))})})]}):null,o.users.length>0?n("div",{children:[e(T,{}),e("div",{className:"mt-10 sm:mt-0"}),e(S,{title:"Team Members",description:"All of the people that are part of this team.",children:e("div",{className:"space-y-6",children:o.users.map(t=>n("div",{className:"flex items-center justify-between",children:[n("div",{className:"flex items-center",children:[e("img",{className:"w-8 h-8 rounded-full",src:t.profile_photo_url,alt:t.username}),e("div",{className:"ml-4",children:t.username})]}),n("div",{className:"flex items-center",children:[c.canAddTeamMembers&&s.length?e("button",{className:"ml-2 text-sm text-slate-400 underline",onClick:()=>z(t),children:M(t.membership.role)}):s.length?e("div",{className:"ml-2 text-sm text-slate-400",children:M(t.membership.role)}):null,C.props.user.id===t.id?e("button",{className:"cursor-pointer ml-6 text-sm text-red-500",onClick:_,children:"Leave"}):null,c.canRemoveTeamMembers?e("button",{className:"cursor-pointer ml-6 text-sm text-red-500",onClick:()=>W(t),children:"Remove"}):null]})]},t.id))})})]}):null,n(N,{isOpen:L,onClose:()=>u(!1),children:[e(N.Content,{title:"Manage Role"}),b?e("div",{children:e("div",{className:"relative z-0 mt-1 border border-slate-200 rounded-lg cursor-pointer",children:s.map((t,i)=>e("button",{type:"button",className:a("relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-slate-300 focus:ring focus:ring-slate-200",{"border-t border-slate-200 rounded-t-none":i>0,"rounded-b-none":i!==Object.keys(s).length-1}),onClick:()=>l.setData("role",t.key),children:n("div",{className:a({"opacity-50":l.data.role&&l.data.role!==t.key}),children:[n("div",{className:"flex items-center",children:[e("div",{className:a("text-sm text-slate-600",{"font-semibold":l.data.role===t.key}),children:t.name}),l.data.role===t.key?e("svg",{className:"ml-2 h-5 w-5 text-green-400",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):null]}),e("div",{className:"mt-2 text-xs text-slate-600",children:t.description})]})},t.key))})}):null,n(N.Footer,{children:[e(k,{onClick:()=>u(!1),children:"Cancel"}),e(R,{onClick:O,className:a("ml-2",{"opacity-25":l.processing}),disabled:l.processing,children:"Save"})]})]}),n(m,{isOpen:B,onClose:()=>y(!1),children:[e(m.Content,{title:"Leave Team",children:"Are you sure you would like to leave this team?"}),n(m.Footer,{children:[e(k,{onClick:()=>y(!1),children:"Cancel"}),e(w,{onClick:E,className:a("ml-2",{"opacity-25":v.processing}),disabled:v.processing,children:"Leave"})]})]}),n(m,{isOpen:!!x,onClose:()=>p(null),children:[e(m.Content,{title:"Remove Team Member",children:"Are you sure you would like to remove this person from the team?"}),n(m.Footer,{children:[e(k,{onClick:()=>p(null),children:"Cancel"}),e(w,{onClick:P,className:a("ml-2",{"opacity-25":g.processing}),disabled:g.processing,children:"Remove"})]})]})]})}export{ue as default};
