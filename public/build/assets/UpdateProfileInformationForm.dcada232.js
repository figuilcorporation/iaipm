import{a as w,u as A,r as i,b as D,c as r,F as E,j as e,d as R}from"./app.56298844.js";import{c as T}from"./index.0579b088.js";import{A as j}from"./ActionMessage.b2d49f5f.js";import{F as U}from"./FormSection.8e7a3808.js";import{I as l,T as c}from"./TextInput.bcaf5cbc.js";import{I as n}from"./InputLabel.8532e73b.js";import{P as B}from"./PrimaryButton.9c0bb2bb.js";import{S as b}from"./SecondaryButton.97a09677.js";import{C as M}from"./CustomSelect.d4787fcc.js";import"./transition.9dc8a278.js";import"./SectionTitle.a8be34b8.js";import"./hoist-non-react-statics.cjs.7313caf3.js";function X({user:s}){var v;const t=w({_method:"PUT",first_name:s.first_name,last_name:s.last_name,username:s.username,phone:s.phone,email:s.email,interest_ids:[0],photo:null}),u=A(),[p,d]=i.exports.useState(null),o=i.exports.useRef(null),f=D(),S=s.interest_areas?(v=s.interest_areas)==null?void 0:v.map(a=>({value:a.id,label:a.name})):[],[m,x]=i.exports.useState(S);i.exports.useEffect(()=>{m&&t.setData("interest_ids",Array.from(m,a=>a.value))},[m]);function y(){t.post(u("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>h()})}function C(){var a;(a=o.current)==null||a.click()}function I(){var N,_;const a=(_=(N=o.current)==null?void 0:N.files)==null?void 0:_[0];if(!a)return;t.setData("photo",a);const g=new FileReader;g.onload=k=>{var P;d((P=k.target)==null?void 0:P.result)},g.readAsDataURL(a)}function F(){R.Inertia.delete(u("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{d(null),h()}})}function h(){var a;(a=o.current)!=null&&a.value&&(o.current.value="",t.setData("photo",null))}return r(U,{onSubmit:y,title:"Profile Information",description:"Update your account's profile information and email address.",renderActions:()=>r(E,{children:[e(j,{on:t.recentlySuccessful,className:"mr-3",children:"Saved."}),e(B,{className:T({"opacity-25":t.processing}),disabled:t.processing,children:"Save"})]}),children:[f.props.jetstream.managesProfilePhotos?r("div",{className:"col-span-6 sm:col-span-6",children:[e("input",{type:"file",className:"hidden",ref:o,onChange:I}),e(n,{htmlFor:"photo",value:"Photo"}),p?e("div",{className:"mt-2",children:e("span",{className:"block rounded-full w-20 h-20",style:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:`url('${p}')`}})}):e("div",{className:"mt-2",children:e("img",{src:s.profile_photo_url,alt:s.username,className:"rounded-full h-20 w-20 object-cover"})}),e(b,{className:"mt-2 mr-2",type:"button",onClick:C,children:"Select A New Photo"}),s.profile_photo_path?e(b,{type:"button",className:"mt-2",onClick:F,children:"Remove Photo"}):null,e(l,{message:t.errors.photo,className:"mt-2"})]}):null,r("div",{className:"col-span-6 sm:col-span-6",children:[e(n,{htmlFor:"first_name",value:"Nom"}),e(c,{id:"first_name",type:"text",className:"mt-1 block w-full",value:t.data.first_name,onChange:a=>t.setData("first_name",a.currentTarget.value),autoComplete:"first_name"}),e(l,{message:t.errors.first_name,className:"mt-2"})]}),r("div",{className:"col-span-6 sm:col-span-6",children:[e(n,{htmlFor:"last_name",value:"Pr\xE9nom"}),e(c,{id:"last_name",type:"text",className:"mt-1 block w-full",value:t.data.last_name,onChange:a=>t.setData("last_name",a.currentTarget.value),autoComplete:"last_name"}),e(l,{message:t.errors.last_name,className:"mt-2"})]}),r("div",{className:"col-span-6 sm:col-span-6",children:[e(n,{htmlFor:"username",value:"Nom d'utilisateur"}),e(c,{id:"username",type:"text",className:"mt-1 block w-full",value:t.data.username,onChange:a=>t.setData("username",a.currentTarget.value),autoComplete:"username"}),e(l,{message:t.errors.username,className:"mt-2"})]}),r("div",{className:"col-span-6 sm:col-span-6",children:[e(n,{htmlFor:"email",value:"Email"}),e(c,{id:"email",type:"email",className:"mt-1 block w-full",value:t.data.email,onChange:a=>t.setData("email",a.currentTarget.value)}),e(l,{message:t.errors.email,className:"mt-2"})]}),e("div",{className:"col-span-6 sm:col-span-6",children:e(M,{closeMenuOnSelect:!1,label:"Centre(s) d'int\xE9r\xEAt(s)",isMulti:!0,selectData:f.props.interestAreas,placeholder:"Centre(s) d'int\xE9r\xEAt(s)",errors:t.errors,defaultValue:m,name:"level_ids",onChange:x})})]})}export{X as default};
